<?php
/*
Plugin Name: WooDash Pro
Description: Modern WooCommerce analytics dashboard.
Version: 1.0
Author: Your Name
*/

if (!defined('ABSPATH')) exit;

// Enqueue scripts/styles
add_action('admin_enqueue_scripts', function($hook) {
    if ($hook !== 'toplevel_page_woodash-pro') return;
    wp_enqueue_style('woodash-tailwind', plugins_url('assets/css/tailwind.min.css', __FILE__));
    wp_enqueue_script('woodash-chart', plugins_url('assets/js/chart.min.js', __FILE__), [], null, true);
    wp_enqueue_script('woodash-dashboard', plugins_url('assets/js/dashboard.js', __FILE__), ['jquery'], null, true);
    wp_localize_script('woodash-dashboard', 'woodash_ajax', [
        'ajax_url' => admin_url('admin-ajax.php'),
        'nonce'    => wp_create_nonce('woodash_nonce')
    ]);
});

// Add menu
add_action('admin_menu', function() {
    add_menu_page(
        'WooDash Pro', 'WooDash Pro', 'manage_woocommerce',
        'woodash-pro', 'woodash_dashboard_page', 'dashicons-chart-bar', 56
    );
});

// Dashboard page
function woodash_dashboard_page() {
    include plugin_dir_path(__FILE__) . 'templates/dashboard.php';
}

// AJAX endpoints
require_once plugin_dir_path(__FILE__) . 'includes/data-endpoints.php';
